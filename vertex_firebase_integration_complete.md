# ๐ฅ ุชูุฑูุฑ ุฅููุงู ุงููููุฉ 2: ุชูุงูู Firebase Authentication

## โ ููุฎุต ุงูุฅูุฌุงุฒุงุช

ุชู ุจูุฌุงุญ ุฅููุงู **ุงููููุฉ 2: ุชูุงูู Firebase Authentication** ูู ุชุทุจูู Vertex. ุงูุชุทุจูู ุงูุขู ูุฏุนู ูุธุงู ูุตุงุฏูุฉ ูุงูู ููุชูุงูู ูุน Firebase.

---

## ๐ฆ ูุง ุชู ุฅูุฌุงุฒู

### **1. ุฅุนุฏุงุฏ Firebase ูู ุงููุดุฑูุน** โ

#### **ูููุงุช ุงูุฅุนุฏุงุฏ:**
- โ `google-services.json` โ `/android/app/google-services.json`
- โ `GoogleService-Info.plist` โ `/ios/Runner/GoogleService-Info.plist`

#### **ุชุญุฏูุซ pubspec.yaml:**
```yaml
dependencies:
  firebase_core: ^3.8.1
  firebase_auth: ^5.3.4
  cloud_firestore: ^5.5.0
  google_sign_in: ^6.2.2
```

#### **ุชุญุฏูุซ Android Configuration:**
- โ ุฅุถุงูุฉ Google Services plugin ูู `build.gradle.kts`
- โ ุชุญุฏูุซ `minSdk` ุฅูู 21 (ูุทููุจ ูู Firebase)
- โ ุฅุถุงูุฉ `google-services` classpath

---

### **2. ุฅูุดุงุก AuthService** โ

ุชู ุฅูุดุงุก ุฎุฏูุฉ ูุตุงุฏูุฉ ุดุงููุฉ ูู `/lib/services/auth_service.dart` ุชุชุถูู:

#### **ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ:**

**๐ง Email/Password Authentication:**
- `signUpWithEmail()` - ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
- `signInWithEmail()` - ุชุณุฌูู ุงูุฏุฎูู
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- ุงูุชุญูู ูู ุชููุฑ ุงุณู ุงููุณุชุฎุฏู

**๐ Google Sign-In:**
- `signInWithGoogle()` - ุชุณุฌูู ุงูุฏุฎูู ุจู Google
- ุฏุนู ุงููุณุชุฎุฏููู ุงูุฌุฏุฏ ูุงูุญุงูููู
- ุชูููุฏ ุงุณู ูุณุชุฎุฏู ูุฑูุฏ ุชููุงุฆูุงู

**๐ Password Reset:**
- `sendPasswordResetEmail()` - ุฅุฑุณุงู ุฑุงุจุท ุฅุนุงุฏุฉ ุงูุชุนููู

**๐ช Sign Out:**
- `signOut()` - ุชุณุฌูู ุงูุฎุฑูุฌ ูู ุฌููุน ุงูุญุณุงุจุงุช

**๐ User Management:**
- ุฅูุดุงุก ูุณุชูุฏุงุช ุงููุณุชุฎุฏููู ูู Firestore
- ุชุญุฏูุซ ุขุฎุฑ ุชุณุฌูู ุฏุฎูู
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุดูู ุงุญุชุฑุงูู
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ

#### **ูููู ูุณุชูุฏ ุงููุณุชุฎุฏู ูู Firestore:**
```javascript
{
  uid: string,
  email: string,
  username: string,
  full_name: string?,
  avatar_url: string?,
  bio: string?,
  location: string?,
  website_url: string?,
  auth_provider: 'email' | 'google',
  is_verified: boolean,
  subscription_tier: 'free' | 'prime' | 'pro',
  stripe_customer_id: string?,
  total_submissions: number,
  total_wins: number,
  total_followers: number,
  total_following: number,
  created_at: timestamp,
  last_login_at: timestamp
}
```

---

### **3. ุดุงุดุงุช ุงููุตุงุฏูุฉ** โ

ุชู ุฅูุดุงุก 3 ุดุงุดุงุช ุงุญุชุฑุงููุฉ ูุฌูููุฉ:

#### **๐ฑ LoginScreen** (`/lib/views/auth/login_screen.dart`)
- ุชุตููู ุฌุฐุงุจ ูุน ุดุนุงุฑ ุงูุชุทุจูู
- ุญููู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุฉ ุงููุฑูุฑ
- ุฅุธูุงุฑ/ุฅุฎูุงุก ูููุฉ ุงููุฑูุฑ
- ุฒุฑ ุชุณุฌูู ุงูุฏุฎูู ุจู Email
- ุฒุฑ ุชุณุฌูู ุงูุฏุฎูู ุจู Google
- ุฑุงุจุท "ูุณูุช ูููุฉ ุงููุฑูุฑ"
- ุฑุงุจุท "ุฅูุดุงุก ุญุณุงุจ"
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุนุฑุถ ุฑุณุงุฆู ูุงุถุญุฉ

#### **๐ SignUpScreen** (`/lib/views/auth/signup_screen.dart`)
- ุญูู ุงุณู ุงููุณุชุฎุฏู (ูุน ุงูุชุญูู)
- ุญูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ุญูู ูููุฉ ุงููุฑูุฑ
- ุญูู ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ
- Checkbox ููููุงููุฉ ุนูู ุงูุดุฑูุท ูุงูุฃุญูุงู
- ุฒุฑ ุฅูุดุงุก ุงูุญุณุงุจ
- ุฒุฑ ุงูุชุณุฌูู ุจู Google
- ุฑุงุจุท "ูุฏูู ุญุณุงุจ ุจุงููุนูุ"
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

#### **๐ ForgotPasswordScreen** (`/lib/views/auth/forgot_password_screen.dart`)
- ุชุตููู ุจุณูุท ููุงุถุญ
- ุญูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ุฒุฑ ุฅุฑุณุงู ุฑุงุจุท ุฅุนุงุฏุฉ ุงูุชุนููู
- ุฑุณุงูุฉ ูุฌุงุญ ุจุนุฏ ุงูุฅุฑุณุงู
- ุฒุฑ ุงูุนูุฏุฉ ูุชุณุฌูู ุงูุฏุฎูู

---

### **4. ุชุญุฏูุซ main.dart** โ

ุชู ุชุญุฏูุซ ุงูููู ุงูุฑุฆูุณู ููุดูู:

```dart
void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  
  // ุชููุฆุฉ Firebase
  await Firebase.initializeApp();
  
  runApp(const VertexApp());
}
```

#### **AuthWrapper Widget:**
- ูุฑุงูุจุฉ ุญุงูุฉ ุงููุตุงุฏูุฉ ูู ุงูููุช ุงููุนูู
- ุชูุฌูู ุชููุงุฆู ุจูู ุดุงุดุงุช ุชุณุฌูู ุงูุฏุฎูู ูุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ
- ุนุฑุถ ุดุงุดุฉ ุชุญููู ุฃุซูุงุก ุงูุชุญูู

```dart
StreamBuilder<User?>(
  stream: FirebaseAuth.instance.authStateChanges(),
  builder: (context, snapshot) {
    if (snapshot.hasData) {
      return const MainScreen();  // ูุณุฌู ุงูุฏุฎูู
    }
    return const LoginScreen();   // ุบูุฑ ูุณุฌู
  },
)
```

---

### **5. ุชุญุฏูุซ ProfileScreen** โ

ุชู ุฅุถุงูุฉ:
- โ ุฒุฑ ุชุณุฌูู ุงูุฎุฑูุฌ ูู AppBar
- โ ูุฑุจุน ุญูุงุฑ ููุชุฃููุฏ ูุจู ุชุณุฌูู ุงูุฎุฑูุฌ
- โ ุชุณุฌูู ุงูุฎุฑูุฌ ูุงูุงูุชูุงู ูุดุงุดุฉ ุชุณุฌูู ุงูุฏุฎูู

---

## ๐ฏ ููููุฉ ุงุณุชุฎุฏุงู ุงูุชุทุจูู

### **ูููุณุชุฎุฏู ุงูุฌุฏูุฏ:**
1. ูุชุญ ุงูุชุทุจูู โ ุดุงุดุฉ ุชุณุฌูู ุงูุฏุฎูู
2. ุงูููุฑ ุนูู "ุฅูุดุงุก ุญุณุงุจ"
3. ููุก ุงูุจูุงูุงุช (ุงุณู ุงููุณุชุฎุฏูุ ุงูุจุฑูุฏุ ูููุฉ ุงููุฑูุฑ)
4. ุงูููุงููุฉ ุนูู ุงูุดุฑูุท ูุงูุฃุญูุงู
5. ุงูููุฑ ุนูู "ุฅูุดุงุก ุญุณุงุจ"
6. ุงูุงูุชูุงู ุชููุงุฆูุงู ููุดุงุดุฉ ุงูุฑุฆูุณูุฉ

### **ูููุณุชุฎุฏู ุงูุญุงูู:**
1. ูุชุญ ุงูุชุทุจูู โ ุดุงุดุฉ ุชุณุฌูู ุงูุฏุฎูู
2. ุฅุฏุฎุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุฉ ุงููุฑูุฑ
3. ุงูููุฑ ุนูู "ุชุณุฌูู ุงูุฏุฎูู"
4. ุงูุงูุชูุงู ุชููุงุฆูุงู ููุดุงุดุฉ ุงูุฑุฆูุณูุฉ

### **ุชุณุฌูู ุงูุฏุฎูู ุจู Google:**
1. ุงูููุฑ ุนูู ุฒุฑ "ุชุณุฌูู ุงูุฏุฎูู ุจู Google"
2. ุงุฎุชูุงุฑ ุญุณุงุจ Google
3. ุงูููุงููุฉ ุนูู ุงูุฃุฐููุงุช
4. ุงูุงูุชูุงู ุชููุงุฆูุงู ููุดุงุดุฉ ุงูุฑุฆูุณูุฉ

### **ูุณูุช ูููุฉ ุงููุฑูุฑ:**
1. ุงูููุฑ ุนูู "ูุณูุช ูููุฉ ุงููุฑูุฑุ"
2. ุฅุฏุฎุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
3. ุงูููุฑ ุนูู "ุฅุฑุณุงู ุฑุงุจุท ุฅุนุงุฏุฉ ุงูุชุนููู"
4. ุงูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
5. ุงุชุจุงุน ุงูุฑุงุจุท ูุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ

### **ุชุณุฌูู ุงูุฎุฑูุฌ:**
1. ุงูุงูุชูุงู ุฅูู ุตูุญุฉ ุงูููู ุงูุดุฎุตู
2. ุงูููุฑ ุนูู ุฃููููุฉ ุชุณุฌูู ุงูุฎุฑูุฌ ูู ุงูุฃุนูู
3. ุชุฃููุฏ ุชุณุฌูู ุงูุฎุฑูุฌ
4. ุงูุงูุชูุงู ุชููุงุฆูุงู ูุดุงุดุฉ ุชุณุฌูู ุงูุฏุฎูู

---

## ๐ง ููููุฉ ุชุดุบูู ุงูุชุทุจูู

### **ุงููุชุทูุจุงุช:**
- Flutter SDK
- Firebase project ููุนุฏ ุจุงููุงูู
- ูููุงุช `google-services.json` ู `GoogleService-Info.plist`

### **ุงูุฎุทูุงุช:**

```bash
# 1. ูู ุงูุถุบุท
tar -xzf vertex_firebase_complete.tar.gz
cd vertex

# 2. ุชุซุจูุช ุงูููุชุจุงุช
export PATH="$PATH:/home/ubuntu/flutter/bin"
flutter pub get

# 3. ุชุดุบูู ุงูุชุทุจูู
flutter run -d chrome  # ูููุชุตูุญ (ููุงุฎุชุจุงุฑ)
flutter run -d android # ููุฃูุฏุฑููุฏ
flutter run -d ios     # ููู iOS
```

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุตุงุฏูุฉ

### **ุงุฎุชุจุงุฑ Email/Password:**
1. ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ ุจู:
   - Username: `testuser`
   - Email: `test@example.com`
   - Password: `123456`
2. ุชุณุฌูู ุงูุฎุฑูุฌ
3. ุชุณุฌูู ุงูุฏุฎูู ุจููุณ ุงูุจูุงูุงุช

### **ุงุฎุชุจุงุฑ Google Sign-In:**
1. ุงูููุฑ ุนูู ุฒุฑ Google
2. ุงุฎุชูุงุฑ ุญุณุงุจ Google
3. ุงูุชุญูู ูู ุฅูุดุงุก ุงููุณุชูุฏ ูู Firestore

### **ุงุฎุชุจุงุฑ Password Reset:**
1. ุงูููุฑ ุนูู "ูุณูุช ูููุฉ ุงููุฑูุฑ"
2. ุฅุฏุฎุงู ุจุฑูุฏ ุฅููุชุฑููู ุตุญูุญ
3. ุงูุชุญูู ูู ูุตูู ุงูุจุฑูุฏ

### **ุงุฎุชุจุงุฑ Sign Out:**
1. ุชุณุฌูู ุงูุฏุฎูู
2. ุงูุงูุชูุงู ููููู ุงูุดุฎุตู
3. ุงูููุฑ ุนูู ุชุณุฌูู ุงูุฎุฑูุฌ
4. ุงูุชุญูู ูู ุงูุนูุฏุฉ ูุดุงุดุฉ ุชุณุฌูู ุงูุฏุฎูู

---

## ๐ ูููู ุงููููุงุช ุงูุฌุฏูุฏุฉ

```
vertex/
โโโ lib/
โ   โโโ services/
โ   โ   โโโ auth_service.dart          โ ุฌุฏูุฏ
โ   โโโ views/
โ   โ   โโโ auth/
โ   โ   โ   โโโ login_screen.dart      โ ุฌุฏูุฏ
โ   โ   โ   โโโ signup_screen.dart     โ ุฌุฏูุฏ
โ   โ   โ   โโโ forgot_password_screen.dart โ ุฌุฏูุฏ
โ   โ   โโโ profile/
โ   โ       โโโ profile_screen.dart    โ ูุญุฏุซ
โ   โโโ main.dart                      โ ูุญุฏุซ
โโโ android/
โ   โโโ app/
โ   โ   โโโ google-services.json       โ ุฌุฏูุฏ
โ   โ   โโโ build.gradle.kts           โ ูุญุฏุซ
โ   โโโ build.gradle.kts               โ ูุญุฏุซ
โโโ ios/
โ   โโโ Runner/
โ       โโโ GoogleService-Info.plist   โ ุฌุฏูุฏ
โโโ pubspec.yaml                       โ ูุญุฏุซ
```

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

### **1. Firestore Security Rules:**
ุญุงููุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ูุถุน Test mode (ููุชูุญุฉ ููุฌููุน). ูุฌุจ ุชุญุฏูุซ ุงูููุงุนุฏ ูุงุญูุงู:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /users/{userId} {
      allow read: if true;
      allow write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
```

### **2. Google Sign-In ุนูู iOS:**
ูุชูุนูู Google Sign-In ุนูู iOSุ ูุฌุจ ุฅุถุงูุฉ `REVERSED_CLIENT_ID` ูู `Info.plist`:
```xml
<key>CFBundleURLTypes</key>
<array>
  <dict>
    <key>CFBundleURLSchemes</key>
    <array>
      <string>YOUR_REVERSED_CLIENT_ID</string>
    </array>
  </dict>
</array>
```

### **3. ุฅูุชุงุฌ Production:**
ูุจู ุงููุดุฑ:
- ุชุญุฏูุซ Firestore Security Rules
- ุชูุนูู Email Verification (ุงุฎุชูุงุฑู)
- ุฅุถุงูุฉ Rate Limiting
- ุชูุนูู reCAPTCHA

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

โ **ูุธุงู ูุตุงุฏูุฉ ูุงูู ููุชูุงูู**  
โ **ุฏุนู Email/Password ู Google Sign-In**  
โ **ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ**  
โ **ุชุณุฌูู ุงูุฎุฑูุฌ**  
โ **ุชูุฌูู ุชููุงุฆู ุจูู ุงูุดุงุดุงุช**  
โ **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงูุงุญุชุฑุงููุฉ**  
โ **ุชุตููู ุฌููู ููุชูุงุณู**  
โ **ููุฏ ูุธูู ูููุธู**  

---

## ๐ ุงูุฎุทูุฉ ุงูุชุงููุฉ: ุงููููุฉ 3

ุงูุขู ุงูุชุทุจูู ุฌุงูุฒ ูููููุฉ ุงูุซุงูุซุฉ: **ุฅุนุฏุงุฏ Stripe Frontend**

ุณูููู ุจู:
1. ุฅุถุงูุฉ ููุชุจุฉ `flutter_stripe`
2. ุฅูุดุงุก `CheckoutScreen`
3. ุชููุฆุฉ Stripe
4. ุฅุนุฏุงุฏ ูุงุฌูุฉ ุงูุฏูุน

---

**ุชู ุฅูุฌุงุฒ ุงููููุฉ 2 ุจูุฌุงุญ! ๐**

**Project ID:** `vertex-1a797`  
**Package Name:** `com.ripolabs.vertex`  
**Bundle ID:** `com.ripolabs.vertex`
